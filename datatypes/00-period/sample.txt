–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ std::chrono —É C++ –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ—á–∞—Ç–∫–∏ —Ä—ñ–∑–Ω–∏—Ö —á–∞—Å–æ–≤–∏—Ö –ø—Ä–æ–º—ñ–∂–∫—ñ–≤ (—Ö–≤–∏–ª–∏–Ω–∏, –≥–æ–¥–∏–Ω–∏, –¥–Ω—ñ —Ç–æ—â–æ), –æ—Å–æ–±–ª–∏–≤–æ –∑ –ø–æ—è–≤–æ—é –Ω–æ–≤–∏—Ö 
—Ñ—É–Ω–∫—Ü—ñ–π —É C++20 . –ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥–∏, —è–∫ —Ü–µ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏.

üïê 1. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó —Ö–≤–∏–ª–∏–Ω–∏
–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó —Ö–≤–∏–ª–∏–Ω–∏, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–Ω—è—Ç–∏ –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–µ–∫—É–Ω–¥, —â–æ –º–∏–Ω—É–ª–∏ –∑ –ø–æ—á–∞—Ç–∫—É —Ü—ñ—î—ó —Ö–≤–∏–ª–∏–Ω–∏:

#include <iostream>
#include <chrono>

int main() {
    using namespace std::chrono;

    auto now = system_clock::now();
    auto now_time = floor<seconds>(now);
    auto since_epoch = now_time.time_since_epoch();

    // –û–±—á–∏—Å–ª—é—î–º–æ, —Å–∫—ñ–ª—å–∫–∏ —Å–µ–∫—É–Ω–¥ –º–∏–Ω—É–ª–æ –∑ –ø–æ—á–∞—Ç–∫—É –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Ö–≤–∏–ª–∏–Ω–∏
    auto secs = duration_cast<seconds>(since_epoch) % 60;
    auto start_of_minute = now_time - secs;

    std::cout << "–ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó —Ö–≤–∏–ª–∏–Ω–∏: " 
              << start_of_minute.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";
}

‚è∞ 2. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó –≥–æ–¥–∏–Ω–∏
–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ ‚Äî –æ–±—á–∏—Å–ª—é—î–º–æ, —Å–∫—ñ–ª—å–∫–∏ —Å–µ–∫—É–Ω–¥ –º–∏–Ω—É–ª–æ –∑ –ø–æ—á–∞—Ç–∫—É –≥–æ–¥–∏–Ω–∏, —ñ –≤—ñ–¥–Ω—ñ–º–∞—î–º–æ —ó—Ö:

auto secs_in_hour = duration_cast<seconds>(since_epoch) % 3600;
auto start_of_hour = now_time - secs_in_hour;

std::cout << "–ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó –≥–æ–¥–∏–Ω–∏: "
          << start_of_hour.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";

üìÖ 3. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –¥–Ω—è (–æ–ø—ñ–≤–Ω—ñ—á)
–£ C++20 –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ chrono –æ—Ç—Ä–∏–º–∞–ª–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Ç–æ–º—É —Ç–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—á–∞—Ç–æ–∫ –¥–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é floor<days>():

#include <chrono>
#include <iostream>

int main() {
    using namespace std::chrono;

    auto now = system_clock::now();
    auto today_midnight = floor<days>(now);

    std::cout << "–ü–æ—á–∞—Ç–æ–∫ –¥–Ω—è: " 
              << today_midnight.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";
}
–¶–µ–π –º–µ—Ç–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Ä–∞—Ö–æ–≤—É—î —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å —Å–∏—Å—Ç–µ–º–∏ 
. 

üìÜ 4. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ç–∏–∂–Ω—è (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫ –∞–±–æ –Ω–µ–¥—ñ–ª—è)
–ó–Ω–æ–≤—É –∂ —Ç–∞–∫–∏, —É C++20 –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Ç–æ–º—É –º–∏ –º–æ–∂–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—á–∞—Ç–æ–∫ —Ç–∏–∂–Ω—è:


#include <chrono>
#include <iostream>

int main() {
    using namespace std::chrono;

    auto now = system_clock::now();
    auto dp = floor<days>(now);  // –î–µ–Ω—å –±–µ–∑ —á–∞—Å—É
    year_month_day ymd{dp};      // –†–æ–∑–∫–ª–∞–¥–∞—î–º–æ –Ω–∞ —Ä—ñ–∫, –º—ñ—Å—è—Ü—å, –¥–µ–Ω—å

    // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ–Ω–µ–¥—ñ–ª–æ–∫ —Ç–∏–∂–Ω—è, –¥–æ —è–∫–æ–≥–æ –≤—Ö–æ–¥–∏—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ—à–Ω—ñ–π –¥–µ–Ω—å
    auto start_of_week = dp - (unsigned)(ymd.weekday() - Monday);

    std::cout << "–ü–æ—á–∞—Ç–æ–∫ —Ç–∏–∂–Ω—è: " 
              << start_of_week.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";
}

üìÖ 5. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è
–¢–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ year_month_day, –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –ø–µ—Ä—à–∏–π –¥–µ–Ω—å –º—ñ—Å—è—Ü—è:

auto ymd = year_month_day{dp};
auto start_of_month = sys_days{ymd.year()/ymd.month()/1};

std::cout << "–ü–æ—á–∞—Ç–æ–∫ –º—ñ—Å—è—Ü—è: " 
          << start_of_month.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";
üìÜ 6. –ü–æ—á–∞—Ç–æ–∫ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–æ–∫—É
cpp


1
2
3
4
auto start_of_year = sys_days{ymd.year()/1/1};

std::cout << "–ü–æ—á–∞—Ç–æ–∫ —Ä–æ–∫—É: " 
          << start_of_year.time_since_epoch().count() << " —Å–µ–∫—É–Ω–¥ –≤—ñ–¥ –µ–ø–æ—Ö–∏\n";
–ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
system_clock::now() ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω–∏–π –º–æ–º–µ–Ω—Ç —á–∞—Å—É.
floor<days>(...) ‚Äî –æ–∫—Ä—É–≥–ª—é—î —á–∞—Å –¥–æ –ø–æ—á–∞—Ç–∫—É –¥–Ω—è.
time_point + duration ‚Äî –±–∞–∑–æ–≤—ñ —Ç–∏–ø–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –º–æ–º–µ–Ω—Ç—É —á–∞—Å—É —Ç–∞ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ 
.
year_month_day —Ç–∞ sys_days ‚Äî –Ω–æ–≤—ñ —Ç–∏–ø–∏ –∑ C++20 –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å 
.
–í–∏—Å–Ω–æ–≤–æ–∫
–í C++20 –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ <chrono> —Å—Ç–∞–ª–∞ –∑–Ω–∞—á–Ω–æ –ø–æ—Ç—É–∂–Ω—ñ—à–æ—é –∑–∞–≤–¥—è–∫–∏ –ø—ñ–¥—Ç—Ä–∏–º—Ü—ñ –∫–∞–ª–µ–Ω–¥–∞—Ä—è, –¥–Ω—ñ–≤, –º—ñ—Å—è—Ü—ñ–≤, —Ä–æ–∫—ñ–≤ —Ç–∞ —á–∞—Å–æ–≤–∏—Ö –∑–æ–Ω. –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ —Ç–æ—á–Ω–æ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –ø–æ—á–∞—Ç–∫–∏ —Ä—ñ–∑–Ω–∏—Ö —á–∞—Å–æ–≤–∏—Ö –ø—Ä–æ–º—ñ–∂–∫—ñ–≤, —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∞–º–µ C++20.

–Ø–∫—â–æ –±–∞–∂–∞—î—Ç–µ, —è –º–æ–∂—É –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ–¥—ñ–±–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —É –≤–µ—Ä—Å—ñ—è—Ö C++11/C++17, –¥–µ –Ω–µ–º–∞—î –∫–∞–ª–µ–Ω–¥–∞—Ä—è 
.

–Ø–∫ –≤ –∫–ª–∞—Å –°++ –¥–æ–¥–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É —Ç–∏–ø—É duration –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–µ–∏ chrono

profile
Qwen3-235B-A22B
–©–æ–± –¥–æ–¥–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É —Ç–∏–ø—É duration –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ <chrono> —É –∫–ª–∞—Å C++, —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–ª—é—á–∏—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª:

cpp


1
#include <chrono>
–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ std::chrono::duration —è–∫ —Ç–∏–ø –¥–ª—è –ø–æ–ª—è –∫–ª–∞—Å—É. –û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–∞—Å—É, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∑–º—ñ–Ω–Ω—É —Ç–∏–ø—É duration:

‚úÖ –ü—Ä–∏–∫–ª–∞–¥:
cpp


1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
‚åÑ
‚åÑ
‚åÑ
‚åÑ
#include <iostream>
#include <chrono>

class Timer {
public:
    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    Timer(const std::chrono::seconds& duration) : duration_(duration) {}

    // –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    long get_seconds() const {
        return duration_.count();
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–æ–≤–æ—ó —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ
    void set_duration(const std::chrono::seconds& duration) {
        duration_ = duration;
    }

private:
    // –ü–æ–ª–µ –∫–ª–∞—Å—É —Ç–∏–ø—É duration
    std::chrono::seconds duration_;
};

int main() {
    Timer t(std::chrono::seconds(10));
    std::cout << "Duration: " << t.get_seconds() << " seconds\n";
    return 0;
}
üß† –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
std::chrono::seconds ‚Äî —Ü–µ —à–∞–±–ª–æ–Ω–Ω–∏–π —Ç–∏–ø std::chrono::duration, —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è —Å–µ–∫—É–Ω–¥ 
.
.count() ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å —á–∞—Å—É, —â–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –æ–±‚Äô—î–∫—Ç—ñ duration.
–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ —Ç–∏–ø–∏ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç–µ–π, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:
std::chrono::milliseconds
std::chrono::minutes
std::chrono::hours 
üîÅ –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å
–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ, —â–æ–± –ø–æ–ª–µ –º–æ–≥–ª–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Ç–∏–ø duration, –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –∫–ª–∞—Å —à–∞–±–ª–æ–Ω–Ω–∏–º:

cpp


1
2
3
4
5
6
7
8
9
10
11
12
13
‚åÑ
‚åÑ
template <typename Rep, typename Period>
class Timer {
public:
    Timer(const std::chrono::duration<Rep, Period>& d) : duration_(d) {}

    template <typename T>
    T as() const {
        return std::chrono::duration_cast<T>(duration_);
    }

private:
    std::chrono::duration<Rep, Period> duration_;
};
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

cpp


1
2
Timer<int, std::ratio<1>> t(std::chrono::seconds(5));
std::cout << "In milliseconds: " << t.as<std::chrono::milliseconds>().count() << "\n";
–î–∂–µ—Ä–µ–ª–∞:
–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ std::chrono::duration –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–∫—ñ–≤ —á–∞—Å—É 
.
std::chrono ‚Äî —á–∞—Å—Ç–∏–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ C++ –∑ C++11 
.
–Ø–∫—â–æ –±–∞–∂–∞—î—Ç–µ, —è –º–æ–∂—É –ø–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –æ–¥–∏–Ω–∏—Ü—è–º–∏ –∞–±–æ –∑ C++17/C++20 –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏.







–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Ç–∏–ø—É duration –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É –≤ –°++?

–Ø–∫ –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ duration –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ chrono –≤ —ñ–Ω—à—ñ –æ–¥–∏–Ω–∏—Ü—ñ —á–∞—Å—É?

–Ø–∫—ñ —î –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è chrono::duration –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ç–∞–π–º–µ—Ä–∞–º–∏ —É –ø—Ä–æ–≥—Ä–∞–º—ñ?

Web Dev

Artifacts

Image Generation
